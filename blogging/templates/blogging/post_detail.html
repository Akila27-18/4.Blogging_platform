
{% extends 'blogging/base.html' %}
{% block title %}{{ post.title }}{% endblock %}
{% block content %}
<article class="card shadow-sm mb-4">
  {% if post.image %}
  <img src="{{ post.image.url }}" class="card-img-top" alt="{{ post.title }}">
  {% endif %}
  <div class="card-body">
    <h1 class="card-title h3">{{ post.title }}</h1>
    <p class="text-muted small mb-3">By {{ post.author.username }} · {{ post.created_at|date:"M d, Y" }}</p>
    <div class="content">
      {{ post.content|linebreaks }}
    </div>
    <div class="mt-3 d-flex gap-2 flex-wrap">
      {% for cat in post.categories.all %}
      <span class="badge text-bg-primary">{{ cat.name }}</span>
      {% endfor %}
    </div>
  </div>
</article>

<section class="mb-4">
  <h5>Comments</h5>
  {% for c in comments %}
  <div class="border rounded p-3 mb-2">
    <div class="small text-muted">{{ c.user.username }} · {{ c.created_at|date:"M d, Y H:i" }}</div>
    <div>{{ c.text|linebreaks }}</div>
  </div>
  {% empty %}
  <p class="text-muted">No comments yet.</p>
  {% endfor %}
</section>

<section>
  <h5>Leave a Comment</h5>
  <form method="post">
    {% csrf_token %}
    {{ comment_form.as_p }}
    <button class="btn btn-primary">Submit</button>
  </form>
  <p class="small text-muted mt-2">Comments require approval by a moderator.</p>
</section>
{% endblock %}
